<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      lang="en"
      metal:use-macro="context/main_template/macros/master">

  <metal:content-core fill-slot="content-core">
    <metal:content-core define-macro="content-core">

      <h3 tal:condition="not: view/available">Chef API must be first initilialized.</h3>

      <tal:condition condition="view/available">

        <p tal:condition="not: context/exists">
          Databag <b tal:content="context/name">id</b> no longer exists.
        </p>

        <tal:condition condition="context/exists">
          <h3>Databag: <span tal:content="context/name">D1</span></h3>

          <table class="listing" summary="Databag Items" id="databag-items">

            <thead>
              <tr>
                <th>Databag Items</th>
              </tr>
            </thead>

            <tbody>
              <tr tal:repeat="item context/get_databag_items"
                  tal:attributes="id item/getId">
                <td>
                  <a href="#" 
                     tal:attributes="href item/getId"
                     tal:content="item/name">Databag name</a>
                </td>
              </tr>
            </tbody>

          </table>
        </tal:condition>

      </tal:condition>

    </metal:content-core>
  </metal:content-core>

</html>
